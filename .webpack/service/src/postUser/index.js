(()=>{"use strict";var e={460:function(e,n,o){var t=this&&this.__awaiter||function(e,n,o,t){return new(o||(o=Promise))((function(i,r){function a(e){try{d(t.next(e))}catch(e){r(e)}}function s(e){try{d(t.throw(e))}catch(e){r(e)}}function d(e){var n;e.done?i(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}d((t=t.apply(e,n||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.handler=void 0;const i=o(553),r=o(906),a=o(706);n.handler=e=>t(void 0,void 0,void 0,(function*(){try{const n=JSON.parse(e.body||"{}"),o={TableName:i.tableName,Item:{id:n.id,email:n.email,password:n.password,firstName:n.firstName,lastName:n.lastName,birthDate:n.birthDate,phone_number:n.phoneNumber}};yield(0,r.postUser)(o);const t={TableName:o.TableName,Key:{id:o.Item.id}},s=yield(0,r.getUser)(t);s.Item?console.log("Item was inserted:",s.Item):console.log("Item was not found");const d={ClientId:process.env.APP_CLIENT_ID,Username:n.email,Password:n.password,UserAttributes:[{Name:"email",Value:n.email},{Name:"given_name",Value:n.firstName},{Name:"family_name",Value:n.lastName},{Name:"birthdate",Value:n.birthDate},{Name:"phone_number",Value:n.phoneNumber}]};return yield(0,a.signUpUser)(d),{statusCode:201,body:JSON.stringify({id:n.id})}}catch(e){return console.error(e),{statusCode:400,body:JSON.stringify({message:e.message})}}}))},706:function(e,n,o){var t=this&&this.__awaiter||function(e,n,o,t){return new(o||(o=Promise))((function(i,r){function a(e){try{d(t.next(e))}catch(e){r(e)}}function s(e){try{d(t.throw(e))}catch(e){r(e)}}function d(e){var n;e.done?i(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}d((t=t.apply(e,n||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.signUpUser=n.confirmUser=n.loginUser=void 0;const i=o(336),r=o(553),a=new i.CognitoIdentityServiceProvider({region:r.secondaryRegion});n.loginUser=e=>t(void 0,void 0,void 0,(function*(){return yield a.initiateAuth(e).promise()})),n.confirmUser=e=>t(void 0,void 0,void 0,(function*(){return yield a.adminConfirmSignUp(e).promise()})),n.signUpUser=e=>t(void 0,void 0,void 0,(function*(){return yield a.signUp(e).promise()}))},906:function(e,n,o){var t=this&&this.__awaiter||function(e,n,o,t){return new(o||(o=Promise))((function(i,r){function a(e){try{d(t.next(e))}catch(e){r(e)}}function s(e){try{d(t.throw(e))}catch(e){r(e)}}function d(e){var n;e.done?i(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,s)}d((t=t.apply(e,n||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.getUser=n.updateUser=n.postUser=n.dynamoDb=void 0;const i=o(336),r=o(553);n.dynamoDb=new i.DynamoDB.DocumentClient({region:r.mainRegion}),n.postUser=e=>t(void 0,void 0,void 0,(function*(){return yield n.dynamoDb.put(e).promise()})),n.updateUser=e=>t(void 0,void 0,void 0,(function*(){return yield n.dynamoDb.update(e).promise()})),n.getUser=e=>t(void 0,void 0,void 0,(function*(){return yield n.dynamoDb.get(e).promise()}))},553:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.tableName=n.secondaryRegion=n.mainRegion=n.moveoLambdaRole=void 0,n.moveoLambdaRole="arn:aws:iam::779000067130:role/Moveo-LambdaExecutionRole",n.mainRegion="il-central-1",n.secondaryRegion="eu-west-1",n.tableName="idoBar-users"},336:e=>{e.exports=require("aws-sdk")}},n={},o=function o(t){var i=n[t];if(void 0!==i)return i.exports;var r=n[t]={exports:{}};return e[t].call(r.exports,r,r.exports,o),r.exports}(460),t=exports;for(var i in o)t[i]=o[i];o.__esModule&&Object.defineProperty(t,"__esModule",{value:!0})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WixFQUFRa0QsZ0JBQWtCbEQsRUFBUTJELFdBQWEzRCxFQUFRK0QscUJBQWtCLEVBQzdGL0QsRUFBUStELGdCQUFrQiwyREFDMUIvRCxFQUFRMkQsV0FBYSxlQUNyQjNELEVBQVFrRCxnQkFBa0IsWUFDMUJsRCxFQUFRWSxVQUFZLGMsVUNOcEJvRCxFQUFPaEUsUUFBVWlFLFFBQVEsVSxHQ0NyQkMsRUFBMkIsQ0FBQyxFQ0U1QkMsRURDSixTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUosRUFBeUJHLEdBQzVDLFFBQXFCRSxJQUFqQkQsRUFDSCxPQUFPQSxFQUFhdEUsUUFHckIsSUFBSWdFLEVBQVNFLEVBQXlCRyxHQUFZLENBR2pEckUsUUFBUyxDQUFDLEdBT1gsT0FIQXdFLEVBQW9CSCxHQUFVSSxLQUFLVCxFQUFPaEUsUUFBU2dFLEVBQVFBLEVBQU9oRSxRQUFTb0UsR0FHcEVKLEVBQU9oRSxPQUNmLENDbkIwQm9FLENBQW9CLEsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hd3Mtc2tpbGxzLy4vc3JjL3Bvc3RVc2VyL2luZGV4LnRzIiwid2VicGFjazovL2F3cy1za2lsbHMvLi9zcmMvc2VydmljZXMvY29nbml0by50cyIsIndlYnBhY2s6Ly9hd3Mtc2tpbGxzLy4vc3JjL3NlcnZpY2VzL2R5bmFtb0RCLnRzIiwid2VicGFjazovL2F3cy1za2lsbHMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLnRzIiwid2VicGFjazovL2F3cy1za2lsbHMvZXh0ZXJuYWwgY29tbW9uanMgXCJhd3Mtc2RrXCIiLCJ3ZWJwYWNrOi8vYXdzLXNraWxscy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9hd3Mtc2tpbGxzL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5oYW5kbGVyID0gdm9pZCAwO1xuY29uc3QgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvY29uc3RhbnRzXCIpO1xuY29uc3QgZHluYW1vREJfMSA9IHJlcXVpcmUoXCIuLi9zZXJ2aWNlcy9keW5hbW9EQlwiKTtcbmNvbnN0IGNvZ25pdG9fMSA9IHJlcXVpcmUoXCIuLi9zZXJ2aWNlcy9jb2duaXRvXCIpO1xuY29uc3QgaGFuZGxlciA9IChldmVudCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuYm9keSB8fCBcInt9XCIpO1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgICBUYWJsZU5hbWU6IGNvbnN0YW50c18xLnRhYmxlTmFtZSxcbiAgICAgICAgICAgIEl0ZW06IHtcbiAgICAgICAgICAgICAgICBpZDogZGF0YS5pZCxcbiAgICAgICAgICAgICAgICBlbWFpbDogZGF0YS5lbWFpbCxcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogZGF0YS5wYXNzd29yZCxcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IGRhdGEuZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiBkYXRhLmxhc3ROYW1lLFxuICAgICAgICAgICAgICAgIGJpcnRoRGF0ZTogZGF0YS5iaXJ0aERhdGUsXG4gICAgICAgICAgICAgICAgcGhvbmVfbnVtYmVyOiBkYXRhLnBob25lTnVtYmVyLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgeWllbGQgKDAsIGR5bmFtb0RCXzEucG9zdFVzZXIpKHBhcmFtcyk7XG4gICAgICAgIGNvbnN0IGdldFBhcmFtcyA9IHtcbiAgICAgICAgICAgIFRhYmxlTmFtZTogcGFyYW1zLlRhYmxlTmFtZSxcbiAgICAgICAgICAgIEtleToge1xuICAgICAgICAgICAgICAgIGlkOiBwYXJhbXMuSXRlbS5pZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHVzZXJSZXNwb25zZSA9IHlpZWxkICgwLCBkeW5hbW9EQl8xLmdldFVzZXIpKGdldFBhcmFtcyk7XG4gICAgICAgIGlmICh1c2VyUmVzcG9uc2UuSXRlbSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJJdGVtIHdhcyBpbnNlcnRlZDpcIiwgdXNlclJlc3BvbnNlLkl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJJdGVtIHdhcyBub3QgZm91bmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2lnblVwUGFyYW1zID0ge1xuICAgICAgICAgICAgQ2xpZW50SWQ6IHByb2Nlc3MuZW52LkFQUF9DTElFTlRfSUQsXG4gICAgICAgICAgICBVc2VybmFtZTogZGF0YS5lbWFpbCxcbiAgICAgICAgICAgIFBhc3N3b3JkOiBkYXRhLnBhc3N3b3JkLFxuICAgICAgICAgICAgVXNlckF0dHJpYnV0ZXM6IFtcbiAgICAgICAgICAgICAgICB7IE5hbWU6IFwiZW1haWxcIiwgVmFsdWU6IGRhdGEuZW1haWwgfSxcbiAgICAgICAgICAgICAgICB7IE5hbWU6IFwiZ2l2ZW5fbmFtZVwiLCBWYWx1ZTogZGF0YS5maXJzdE5hbWUgfSxcbiAgICAgICAgICAgICAgICB7IE5hbWU6IFwiZmFtaWx5X25hbWVcIiwgVmFsdWU6IGRhdGEubGFzdE5hbWUgfSxcbiAgICAgICAgICAgICAgICB7IE5hbWU6IFwiYmlydGhkYXRlXCIsIFZhbHVlOiBkYXRhLmJpcnRoRGF0ZSB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgTmFtZTogXCJwaG9uZV9udW1iZXJcIixcbiAgICAgICAgICAgICAgICAgICAgVmFsdWU6IGRhdGEucGhvbmVOdW1iZXIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgICAgIHlpZWxkICgwLCBjb2duaXRvXzEuc2lnblVwVXNlcikoc2lnblVwUGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXR1c0NvZGU6IDIwMSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgaWQ6IGRhdGEuaWQgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXR1c0NvZGU6IDQwMCxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KSxcbiAgICAgICAgfTtcbiAgICB9XG59KTtcbmV4cG9ydHMuaGFuZGxlciA9IGhhbmRsZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5zaWduVXBVc2VyID0gZXhwb3J0cy5jb25maXJtVXNlciA9IGV4cG9ydHMubG9naW5Vc2VyID0gdm9pZCAwO1xuY29uc3QgYXdzX3Nka18xID0gcmVxdWlyZShcImF3cy1zZGtcIik7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9jb25zdGFudHNcIik7XG5jb25zdCBjb2duaXRvID0gbmV3IGF3c19zZGtfMS5Db2duaXRvSWRlbnRpdHlTZXJ2aWNlUHJvdmlkZXIoe1xuICAgIHJlZ2lvbjogY29uc3RhbnRzXzEuc2Vjb25kYXJ5UmVnaW9uLFxufSk7XG5jb25zdCBsb2dpblVzZXIgPSAocGFyYW1zKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICByZXR1cm4geWllbGQgY29nbml0by5pbml0aWF0ZUF1dGgocGFyYW1zKS5wcm9taXNlKCk7XG59KTtcbmV4cG9ydHMubG9naW5Vc2VyID0gbG9naW5Vc2VyO1xuY29uc3QgY29uZmlybVVzZXIgPSAocGFyYW1zKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICByZXR1cm4geWllbGQgY29nbml0by5hZG1pbkNvbmZpcm1TaWduVXAocGFyYW1zKS5wcm9taXNlKCk7XG59KTtcbmV4cG9ydHMuY29uZmlybVVzZXIgPSBjb25maXJtVXNlcjtcbmNvbnN0IHNpZ25VcFVzZXIgPSAocGFyYW1zKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICByZXR1cm4geWllbGQgY29nbml0by5zaWduVXAocGFyYW1zKS5wcm9taXNlKCk7XG59KTtcbmV4cG9ydHMuc2lnblVwVXNlciA9IHNpZ25VcFVzZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5nZXRVc2VyID0gZXhwb3J0cy51cGRhdGVVc2VyID0gZXhwb3J0cy5wb3N0VXNlciA9IGV4cG9ydHMuZHluYW1vRGIgPSB2b2lkIDA7XG5jb25zdCBhd3Nfc2RrXzEgPSByZXF1aXJlKFwiYXdzLXNka1wiKTtcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL3V0aWxzL2NvbnN0YW50c1wiKTtcbmV4cG9ydHMuZHluYW1vRGIgPSBuZXcgYXdzX3Nka18xLkR5bmFtb0RCLkRvY3VtZW50Q2xpZW50KHtcbiAgICByZWdpb246IGNvbnN0YW50c18xLm1haW5SZWdpb24sXG59KTtcbmNvbnN0IHBvc3RVc2VyID0gKHBhcmFtcykgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgcmV0dXJuIHlpZWxkIGV4cG9ydHMuZHluYW1vRGIucHV0KHBhcmFtcykucHJvbWlzZSgpO1xufSk7XG5leHBvcnRzLnBvc3RVc2VyID0gcG9zdFVzZXI7XG5jb25zdCB1cGRhdGVVc2VyID0gKHBhcmFtcykgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgcmV0dXJuIHlpZWxkIGV4cG9ydHMuZHluYW1vRGIudXBkYXRlKHBhcmFtcykucHJvbWlzZSgpO1xufSk7XG5leHBvcnRzLnVwZGF0ZVVzZXIgPSB1cGRhdGVVc2VyO1xuY29uc3QgZ2V0VXNlciA9IChwYXJhbXMpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIHJldHVybiB5aWVsZCBleHBvcnRzLmR5bmFtb0RiLmdldChwYXJhbXMpLnByb21pc2UoKTtcbn0pO1xuZXhwb3J0cy5nZXRVc2VyID0gZ2V0VXNlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy50YWJsZU5hbWUgPSBleHBvcnRzLnNlY29uZGFyeVJlZ2lvbiA9IGV4cG9ydHMubWFpblJlZ2lvbiA9IGV4cG9ydHMubW92ZW9MYW1iZGFSb2xlID0gdm9pZCAwO1xuZXhwb3J0cy5tb3Zlb0xhbWJkYVJvbGUgPSBcImFybjphd3M6aWFtOjo3NzkwMDAwNjcxMzA6cm9sZS9Nb3Zlby1MYW1iZGFFeGVjdXRpb25Sb2xlXCI7XG5leHBvcnRzLm1haW5SZWdpb24gPSAnaWwtY2VudHJhbC0xJztcbmV4cG9ydHMuc2Vjb25kYXJ5UmVnaW9uID0gJ2V1LXdlc3QtMSc7XG5leHBvcnRzLnRhYmxlTmFtZSA9ICdpZG9CYXItdXNlcnMnO1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYXdzLXNka1wiKTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2MCk7XG4iXSwibmFtZXMiOlsiX19hd2FpdGVyIiwidGhpcyIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJoYW5kbGVyIiwiY29uc3RhbnRzXzEiLCJkeW5hbW9EQl8xIiwiY29nbml0b18xIiwiZXZlbnQiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwiYm9keSIsInBhcmFtcyIsIlRhYmxlTmFtZSIsInRhYmxlTmFtZSIsIkl0ZW0iLCJpZCIsImVtYWlsIiwicGFzc3dvcmQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImJpcnRoRGF0ZSIsInBob25lX251bWJlciIsInBob25lTnVtYmVyIiwicG9zdFVzZXIiLCJnZXRQYXJhbXMiLCJLZXkiLCJ1c2VyUmVzcG9uc2UiLCJnZXRVc2VyIiwiY29uc29sZSIsImxvZyIsInNpZ25VcFBhcmFtcyIsIkNsaWVudElkIiwicHJvY2VzcyIsImVudiIsIkFQUF9DTElFTlRfSUQiLCJVc2VybmFtZSIsIlBhc3N3b3JkIiwiVXNlckF0dHJpYnV0ZXMiLCJOYW1lIiwiVmFsdWUiLCJzaWduVXBVc2VyIiwic3RhdHVzQ29kZSIsInN0cmluZ2lmeSIsImVycm9yIiwibWVzc2FnZSIsImNvbmZpcm1Vc2VyIiwibG9naW5Vc2VyIiwiYXdzX3Nka18xIiwiY29nbml0byIsIkNvZ25pdG9JZGVudGl0eVNlcnZpY2VQcm92aWRlciIsInJlZ2lvbiIsInNlY29uZGFyeVJlZ2lvbiIsImluaXRpYXRlQXV0aCIsInByb21pc2UiLCJhZG1pbkNvbmZpcm1TaWduVXAiLCJzaWduVXAiLCJ1cGRhdGVVc2VyIiwiZHluYW1vRGIiLCJEeW5hbW9EQiIsIkRvY3VtZW50Q2xpZW50IiwibWFpblJlZ2lvbiIsInB1dCIsInVwZGF0ZSIsImdldCIsIm1vdmVvTGFtYmRhUm9sZSIsIm1vZHVsZSIsInJlcXVpcmUiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiXSwic291cmNlUm9vdCI6IiJ9